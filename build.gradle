plugins {
  id 'java'
  id 'idea'
}

sourceCompatibility = '1.8'

ext {
  taskGroup = 'Progect specific'
  mainClassName = 'daggerok.Main'
}

jar {
  from {
    (configurations.compile).collect {
      it.isDirectory() ? it : zipTree(it)
    }
  }
  manifest.attributes 'Main-Class': mainClassName
}

repositories {
  jcenter()
}

dependencies {
  compile 'org.slf4j:slf4j-api',
      'org.slf4j:slf4j-simple:1.+',
      'org.projectlombok:lombok:1.+'
}

task run(type: JavaExec, dependsOn: classes) {
  // default task:
  group taskGroup
  description 'run main class'
  // JavaExec task:
  main = mainClassName
  classpath = sourceSets.main.runtimeClasspath
  args 'this', 'is', 'run', 'task'
}

task runJar(type: Exec, dependsOn: jar) {
  // exec task props:
  executable 'java'
  args '-jar', "$jar.archivePath", 'this', 'is', 'runJar', 'task'

  // defaul task props:
  description 'run built jar'
  group taskGroup
}
